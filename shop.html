<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Abstract Earth - Product Page</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');

    body {
      font-family: 'Quicksand', sans-serif;
      background-color: #f4f3f1;
      color: #2e2e2e;
      margin: 0;
    }

    header {
      background-color: #2f4f4f;
      color: white;
      padding: 1rem 2rem;
      text-align: center;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 1rem;
      justify-content: center;
      padding: 0;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: 600;
    }

    nav ul li a:hover {
      color: #98fb98;
    }

    h1 {
      text-align: center;
      margin-top: 20px;
    }

    /* Filter buttons */
    .filter-buttons {
      text-align: center;
      margin: 20px;
    }

    .filter-buttons button {
      padding: 10px 20px;
      margin: 5px;
      background-color: black;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .filter-buttons button.active {
      background-color: green;
    }

    .filter-buttons button.inactive {
      background-color: grey;
    }

    /* Products grid */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .product {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product:hover {
      transform: scale(1.03);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .product img {
      width: 100%;
      max-height: 180px;
      object-fit: cover;
      border-radius: 10px;
    }

    .rating {
      color: gold;
      font-size: 18px;
      margin: 5px 0;
    }

    /* Sizes & colors selectable */
    .sizes span,
    .colors span {
      display: inline-block;
      margin: 3px;
      font-size: 12px;
      cursor: pointer;
    }

    .sizes span {
      padding: 4px 8px;
      background-color: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .sizes span.selected {
      background-color: #2f4f4f;
      color: white;
    }

    .colors span {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid #444;
    }

    .colors span.selected {
      border: 3px solid green;
    }

    .white { background-color: white; }
    .black { background-color: black; }
    .grey { background-color: grey; }
    .red { background-color: red; }
    .darkblue { background-color: #001f3f; }

    .price {
      font-weight: bold;
      color: #4b2e2e;
      margin-top: 5px;
    }

    .quantity {
      margin: 10px 0;
    }

    .quantity input {
      width: 60px;
      text-align: center;
      padding: 4px;
    }

    .add-to-cart {
      background-color: #0f119e;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }

    .add-to-cart:hover {
      background-color: #6769f1;
    }

    /* Popup message */
    .popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: green;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      display: none;
      z-index: 2000;
      animation: fadeIn 0.4s;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    /* Cart sidebar */
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -100%;
      width: 300px;
      height: 100%;
      background-color: #fff;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      transition: right 0.3s ease;
      overflow-y: auto;
      z-index: 1000;
    }

    .cart-sidebar.open {
      right: 0;
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-close {
      font-size: 24px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .cart-items {
      margin-top: 20px;
    }

    .cart-item {
      margin-bottom: 10px;
      font-size: 14px;
    }

    .cart-footer {
      margin-top: 20px;
    }

    .checkout-btn {
      background-color: #d2785f;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }

    footer {
      text-align: center;
      background-color: #2f4f4f;
      color: white;
      padding: 1rem;
      margin-top: 2rem;
    }

    /* Modal for custom quote form */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }

    .modal-content h2 {
      margin-bottom: 15px;
    }

    .modal-content input,
    .modal-content textarea {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .modal-content button {
      background: blue;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }

    .close-modal {
      float: right;
      font-size: 20px;
      cursor: pointer;
      color: red;
    }

    @media (max-width: 600px) {
      nav ul {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">üåç Abstract Earth</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="shop.html">Products</a></li>
        <li><a href="checkout.html">Checkout</a></li>
      </ul>
    </nav>
  </header>

  <h1>Our Products</h1>

  <div class="filter-buttons">
    <button id="hoodiesBtn">Hoodies</button>
    <button id="tshirtsBtn">T-Shirts</button>
    <button id="customQuoteBtn">Get Custom Quote</button>
  </div>

  <div class="products" id="products"></div>

  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="cart-close" id="closeCart">&times;</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div class="cart-total" id="cartTotal">Total: R0.00</div>
      <button class="checkout-btn" id="checkoutBtn">Checkout</button>
    </div>
  </div>

  <!-- Popup -->
  <div class="popup" id="popup">Item added to cart!</div>

  <!-- Modal for custom quote -->
  <div class="modal" id="customModal">
    <div class="modal-content">
      <span class="close-modal" id="closeModal">&times;</span>
      <h2>Request a Custom Quote</h2>
      <form id="customForm">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <input type="tel" name="phone" placeholder="Your WhatsApp Number" required>
        <textarea name="message" placeholder="Write your message..." required></textarea>
        <button type="submit">Get a Quote</button>
      </form>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Mbalz_Creations. All rights reserved.</p>
    <p>Designed by Mbali Mahlangu</p>
  </footer>

  <script>
    const productsData = [
      {
        id: 1,
        name: "Hoodie 1",
        category: "hoodies",
        price: 150.00,
        image: "https://via.placeholder.com/250x180?text=Hoodie+1",
        rating: 5.0,
        sizes: ["S", "M", "L", "XL", "XXL"],
        colors: ["white", "black", "red"]
      },
      {
        id: 2,
        name: "T-Shirt 1",
        category: "tshirts",
        price: 190.00,
        image: "https://via.placeholder.com/250x180?text=T-Shirt+1",
        rating: 5.0,
        sizes: ["S", "M", "L", "XL", "XXL"],
        colors: ["grey", "darkblue", "black"]
      }
    ];

    let cart = [];
    let currentCategory = null;

    const productsContainer = document.getElementById('products');
    const popup = document.getElementById('popup');
    const cartSidebar = document.getElementById('cartSidebar');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalDisplay = document.getElementById('cartTotal');
    const closeCartBtn = document.getElementById('closeCart');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const hoodiesBtn = document.getElementById('hoodiesBtn');
    const tshirtsBtn = document.getElementById('tshirtsBtn');

    // Custom quote modal
    const customQuoteBtn = document.getElementById('customQuoteBtn');
    const customModal = document.getElementById('customModal');
    const closeModal = document.getElementById('closeModal');
    const customForm = document.getElementById('customForm');

    customQuoteBtn.addEventListener("click", () => {
      customModal.style.display = "flex";
    });

    closeModal.addEventListener("click", () => {
      customModal.style.display = "none";
    });

    customForm.addEventListener("submit", function(e) {
      e.preventDefault();
      const formData = new FormData(customForm);
      const name = formData.get("name");
      const email = formData.get("email");
      const phone = formData.get("phone");
      const message = formData.get("message");

      const mailtoLink = `mailto:mbalenhlembale.641@gmail.com?subject=Custom Quote Request from ${name}&body=Name: ${name}%0AEmail: ${email}%0AWhatsApp: ${phone}%0AMessage: ${message}`;
      window.location.href = mailtoLink;
    });

    function renderProducts() {
      productsContainer.innerHTML = "";

      const filtered = currentCategory ? productsData.filter(p => p.category === currentCategory) : productsData;

      filtered.forEach(product => {
        const sizeList = product.sizes.map(s => `<span class="size">${s}</span>`).join("");
        const colorList = product.colors.map(c => `<span class="color ${c}" data-color="${c}"></span>`).join("");
        const stars = '‚≠ê'.repeat(Math.floor(product.rating));

        const prodDiv = document.createElement('div');
        prodDiv.classList.add('product');
        prodDiv.innerHTML = `
          <img src="${product.image}" alt="${product.name}" />
          <h3>${product.name}</h3>
          <div class="rating">${stars}</div>
          <div class="sizes">${sizeList}</div>
          <div class="colors">${colorList}</div>
          <div class="price">R${product.price.toFixed(2)}</div>
          <div class="quantity">
            <label>Qty: <input type="number" class="qty" value="1" min="1"></label>
          </div>
          <button class="add-to-cart" data-id="${product.id}">Add to Cart</button>
        `;
        productsContainer.appendChild(prodDiv);
      });
    }

    function updateButtons() {
      hoodiesBtn.classList.remove("active","inactive");
      tshirtsBtn.classList.remove("active","inactive");

      if (currentCategory === "hoodies") {
        hoodiesBtn.classList.add("active");
        tshirtsBtn.classList.add("inactive");
      } else if (currentCategory === "tshirts") {
        tshirtsBtn.classList.add("active");
        hoodiesBtn.classList.add("inactive");
      }
    }

    hoodiesBtn.addEventListener("click", () => {
      currentCategory = "hoodies";
      renderProducts();
      updateButtons();
    });

    tshirtsBtn.addEventListener("click", () => {
      currentCategory = "tshirts";
      renderProducts();
      updateButtons();
    });

    productsContainer.addEventListener("click", e => {
      const productDiv = e.target.closest(".product");

      if (e.target.classList.contains("size")) {
        productDiv.querySelectorAll(".size").forEach(s => s.classList.remove("selected"));
        e.target.classList.add("selected");
      }

      if (e.target.classList.contains("color")) {
        productDiv.querySelectorAll(".color").forEach(c => c.classList.remove("selected"));
        e.target.classList.add("selected");
      }

      if (e.target.classList.contains("add-to-cart")) {
        const id = parseInt(e.target.getAttribute("data-id"));
        const product = productsData.find(p => p.id === id);
        const selectedSize = productDiv.querySelector(".size.selected");
        const selectedColor = productDiv.querySelector(".color.selected");
        const qtyInput = productDiv.querySelector(".qty");

        if (!selectedSize || !selectedColor) {
          alert("Please select size and color before adding to cart.");
          return;
        }

        const qty = parseInt(qtyInput.value) || 1;

        cart.push({
          ...product,
          size: selectedSize.textContent,
          color: selectedColor.getAttribute("data-color"),
          qty
        });

        updateCartUI();

        popup.style.display = "block";
        setTimeout(() => { popup.style.display = "none"; }, 10000);
      }
    });

    function updateCartUI() {
      cartItemsContainer.innerHTML = "";
      let total = 0;

      cart.forEach(item => {
        total += item.price * item.qty;
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("cart-item");
        itemDiv.innerHTML = `<strong>${item.name}</strong> (${item.size}, ${item.color}) x${item.qty} - R${(item.price * item.qty).toFixed(2)}`;
        cartItemsContainer.appendChild(itemDiv);
      });

      cartTotalDisplay.textContent = `Total: R${total.toFixed(2)}`;
      cartSidebar.classList.add("open");
    }

    closeCartBtn.addEventListener("click", () => {
      cartSidebar.classList.remove("open");
    });

    checkoutBtn.addEventListener("click", () => {
      localStorage.setItem("cart", JSON.stringify(cart));
      window.location.href = "checkout.html";
    });

    // Initial
    renderProducts();
  </script>
</body>
</html>
